(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{511:function(e,t,r){"use strict";r.r(t);var i=r(1),a=Object(i.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("Spring Security 是Spring家族中基于JavaEE的企业Web应用程序的安全服务框架。准确而言是基于JavaEE中Servlet规范的Filter机制。")]),e._v(" "),t("p",[e._v("根据Servlet规范：一个客户端请求Request在Servlet容器中需要经过Filter Chain中一些列Filter处理后才会获取到Web资源，而且响应Response也需要再次经过Filter Chain中的Filter处理后才能返回给客户端。Spring基于该Servlet规范，在Filter中接入安全机制来保证Web资源的安全。")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/b1fbe44843b04ca3bff54df4756a8b2b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbGVlZGNvZGVKb2huMDE=,size_12,color_FFFFFF,t_70,g_se,x_16",alt:"在这里插入图片描述"}})]),e._v(" "),t("p",[e._v("在Spring中（AOB：面对Bean编程），Filter对应的Bean为GenericFilterBean。")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/7b99742e327b4a9e955a81452cb236db.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbGVlZGNvZGVKb2huMDE=,size_17,color_FFFFFF,t_70,g_se,x_16",alt:"在这里插入图片描述"}})]),e._v(" "),t("p",[e._v("这是一个抽象类，具体类为DelegatingFilterProxy，该类是一个委托类，主要类属性如下")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/e210385ee3594b23adbef43517ad9ca0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbGVlZGNvZGVKb2huMDE=,size_19,color_FFFFFF,t_70,g_se,x_16",alt:"在这里插入图片描述"}})]),e._v(" "),t("p",[e._v("Filter的核心方法doFilter简化后如下")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/cfbb669c70564bd69d5e9207927ffc31.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbGVlZGNvZGVKb2huMDE=,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"在这里插入图片描述"}})]),e._v(" "),t("p",[e._v('正常情况下Servlet的Filter需要配置在web.xml中，这样Servlet容器初始化时就能找到并管理其生命周期，DelegatingFilterProxy则是Spring中用来找到那些不注册在web.xml中的Filter，然后交给Servlet去处理。DelegatingFilterProxy是通过WebApplicationContext从IOC中根据targetBeanName获取已注册的Filter Bean。Spring Security基于Spring，因此也是利用该机制来完成Filter的注册的，其targetBeanName="springSecurityFilterChain"')]),e._v(" "),t("p",[e._v("在基于web.xml类型的Web应用中，需要配置")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/05a19d9179964fad8162fbc8cc2bdda7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbGVlZGNvZGVKb2huMDE=,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"在这里插入图片描述"}})]),e._v(" "),t("p",[e._v("基于JavaConfig类型的Web应用中，则需要配置")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/e79810c6c5254e8fac96dae27234a3c9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbGVlZGNvZGVKb2huMDE=,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"在这里插入图片描述"}})]),e._v(" "),t("p",[e._v("springSecurityFilterChain这只是BeanName，其具体类为：FilterChainProxy，其doFilter如下")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/8dd01c061451405486f772267321609e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbGVlZGNvZGVKb2huMDE=,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"在这里插入图片描述"}})]),e._v(" "),t("p",[e._v("前面也说了一个客户端请求需要经过2次Filter，而整个请求是单条链，因此正常情况下只需要一次就可以了。Filter的核心为doFilter，在FilterChainProxy中抽象为doFilterInternal进行了隔离分层")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/accec35b9b604a6b9b3a70234c645d03.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbGVlZGNvZGVKb2huMDE=,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"在这里插入图片描述"}})]),e._v(" "),t("p",[e._v("这里的getFilters很重要，决定了Spring Security到底执行了什么过滤器")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/a221d1e0420b401cb8600a21d780dbba.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbGVlZGNvZGVKb2huMDE=,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"在这里插入图片描述"}})]),e._v(" "),t("p",[e._v("SecurityFilterChain 是配置到FilterChainProxy中的，配置过程很复杂，这里先不说，最终配置好的SecurityFilterChain为一个集合：filterChains。而SecurityFilterChain#matches则决定了请求流程，这是一个单向开关，多个过滤器链最终只能执行一条。单条过滤器链抽象为VirtualFilterChain，该类是一个经典的变形责任链模式。好多框架都这样用，这里先不多说。")]),e._v(" "),t("p",[e._v("其实到这里，一个正常的Servlet容器已经将Spring Security容纳进去了，具体布局如下,下篇文章描述Spring Security的主要功能.")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/52f4d6a7df75426491a4100cc756ffa0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbGVlZGNvZGVKb2huMDE=,size_18,color_FFFFFF,t_70,g_se,x_16",alt:"在这里插入图片描述"}})])])}),[],!1,null,null,null);t.default=a.exports}}]);